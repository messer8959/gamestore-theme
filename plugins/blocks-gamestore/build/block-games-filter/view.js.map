{"version":3,"file":"block-games-filter/view.js","mappings":"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","sources":["webpack://blocks-gamestore/./src/block-games-filter/view.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function(){\r\n\r\n    const filterForm = document.querySelector('.games-filter form');\r\n    const loadMoreButton = document.querySelector('.load-more-button');\r\n    const sortingForm = document.querySelector('.custom-sort form');\r\n    let currentPage = 1;\r\n\r\n    filterForm.addEventListener('change', function(){\r\n        currentPage = 1;\r\n        submitForm(false);\r\n    });\r\n    filterForm.addEventListener('reset', function(){\r\n        currentPage = 1;\r\n        setInterval(() => {\r\n            submitForm(false);\r\n        }, 100);\r\n        \r\n    });\r\n\r\n    sortingForm.addEventListener('change', function(){\r\n        currentPage = 1;\r\n        submitForm(false);\r\n    });\r\n    loadMoreButton.addEventListener('click', function(){\r\n        currentPage++;\r\n        submitForm(true);\r\n    });\r\n\r\n    function submitForm(append = false){\r\n        const formData = new FormData(filterForm);\r\n        const formSortingData = new FormData(sortingForm); \r\n\r\n        const selectedLanguages = [];\r\n        document.querySelectorAll('input[name^=\"language-\"]:checked').forEach((checkbox)=>{\r\n            selectedLanguages.push(checkbox.name.replace('language-',''));\r\n        });\r\n\r\n        const selectedGenres = [];\r\n        document.querySelectorAll('input[name^=\"genre-\"]:checked').forEach((checkbox)=>{\r\n            selectedGenres.push(checkbox.name.replace('genre-',''));\r\n        });\r\n\r\n        fetch(gamestore_params.ajaxurl, {\r\n            method: 'POST',\r\n            body: new URLSearchParams({\r\n                action: 'filter_games',\r\n                page: currentPage,\r\n                post_per_page: formData.get('post_per_page'),\r\n                platforms: formData.get('platforms'),\r\n                singleplayer: formData.get('singleplayer'),\r\n                publisher: formData.get('publisher'),\r\n                release: formData.get('released'),\r\n                languages: selectedLanguages.join(','),\r\n                genres: selectedGenres.join(','),\r\n                sort: formSortingData.get('sorting')\r\n            })\r\n        })\r\n        .then(response => response.text())\r\n        .then(data => {\r\n            console.log(data);\r\n            const gameListContainer = document.querySelector('.games-list');\r\n            if(append){\r\n                gameListContainer.innerHTML += data;\r\n            } else {\r\n                gameListContainer.innerHTML = data;\r\n            }\r\n        })\r\n        .catch(error => console.log('Error', error));\r\n    }\r\n\r\n});"],"names":["document","addEventListener","filterForm","querySelector","loadMoreButton","sortingForm","currentPage","submitForm","setInterval","append","formData","FormData","formSortingData","selectedLanguages","querySelectorAll","forEach","checkbox","push","name","replace","selectedGenres","fetch","gamestore_params","ajaxurl","method","body","URLSearchParams","action","page","post_per_page","get","platforms","singleplayer","publisher","release","languages","join","genres","sort","then","response","text","data","console","log","gameListContainer","innerHTML","catch","error"],"sourceRoot":""}